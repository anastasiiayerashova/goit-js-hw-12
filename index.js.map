{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport const BASE_URL = \"https://pixabay.com/api/\";\nexport const API_KEY = \"46106680-1f6bf9cc8c5ebc2359fb269e0\";\n\nexport let limit = 15;\nexport let page = 1;\nexport let totalPages = Math.ceil(100 / limit);\n\nexport async function fetchData(searchQuery, page) {\n    const params = {\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: limit,\n        _page: page\n    };\n    \n    const urlParams = new URLSearchParams(params);\n    const response = await axios.get(`${BASE_URL}?key=${API_KEY}&${urlParams}`);\n    return response.data;\n};\n\n","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchData, limit } from \"./pixabay-api\";\nimport { loadBtn, currentQuery } from \"../main\";\n\nlet ul = document.querySelector(\".gallery\");\nlet page = 1;\n\nexport let totalHits = 0;\n\n\nexport const loader = document.querySelector(\".div-loader\");\nexport const secondLoader = document.querySelector(\".div-loader-2\");\n\nexport function showErrorMessage(message) {\n    iziToast.error({\n        title: 'Error',\n        message,\n    });\n}\n\nexport function toggleLoader(show) {\nloader.style.visibility = show ? \"visible\" : \"hidden\";\n}\n\nexport function toggleLoaderSec(show) {\nsecondLoader.style.visibility = show ? \"visible\" : \"hidden\";\n}\n\nexport function renderMarkup({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n        return `<li class=\"image\">\n        <a class = \"gallery-link\" href = \"${largeImageURL}\">  \n        <img src = \"${webformatURL}\" alt = \"${tags}\" class = \"image\" />\n        </a>\n        <div class = \"card-body\">   \n          <p class=\"text\">Likes <span class = \"value\">${likes}</span></p>\n          <p class=\"text\">Views <span class = \"value\">${views}</span></p>\n          <p class=\"text\">Comments <span class = \"value\">${comments}</span></p>\n          <p class=\"text\">Downloads <span class = \"value\">${downloads}</span></p>\n          </div>\n        </li>`;\n}\n    \nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',        \n    captionPosition: 'bottom',  \n    captionDelay: 250, \n});\n\nexport async function clickOnBtn() {\n   \n    // const form = document.querySelector(\".container\");\n    // const searchQuery = form.elements.query.value.trim();\n      \n    // if (searchQuery !== currentQuery) {\n    //     page = 1;\n    //     ul.innerHTML = \"\"; \n    // }\n\n    toggleLoaderSec(true);\n\n    const totalPages = Math.ceil(100 / limit);\n\n    if (page > totalPages) {\n        toggleLoaderSec(false);\n        return iziToast.error({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results.\"\n        });\n    }\n\n    try {\n        const images = await fetchData(currentQuery, page);\n        const imagesMarkup = images.hits.map(renderMarkup).join(\"\");\n        ul.insertAdjacentHTML(\"beforeend\", imagesMarkup);\n        \n        const { height: cardHeight } = document.querySelector(\".image img\").getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        });\n\n        loadBtn.style.display = \"flex\";\n        lightbox.refresh();\n        page += 1;\n    }\n    \n\n    catch (error) {\n        console.log(error)\n    }\n\n    finally {\n        toggleLoaderSec(false)\n    }\n}","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { BASE_URL, API_KEY, fetchData, limit, totalPages } from \"./js/pixabay-api\";\nimport { showErrorMessage, loader, toggleLoader, renderMarkup, lightbox, secondLoader, toggleLoaderSec, clickOnBtn } from \"./js/render-functions\";\n\ndocument.head.insertAdjacentHTML(\"beforeend\", `<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"https://fonts.googleapis.com/css2?family=Montserrat:ital@0;1&display=swap\" rel=\"stylesheet\"><link href=\"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,500;1,500&display=swap\" rel=\"stylesheet\">`)\n\nexport let ul = document.querySelector(\".gallery\");\nconst btn = document.querySelector(\".btn\");\nconst form = document.querySelector(\".container\");\nexport let loadBtn = document.querySelector(\".load-btn\");\n\nlet page = 1;\nexport let currentQuery = \"\";\nlet totalHits = 0;\n\n\nfunction checkForm(event) {\n\n    event.preventDefault();\n    const form = event.currentTarget;\n    const searchQuery = form.elements.query.value.trim();\n\n    if ( !searchQuery) {\n        showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n        return;\n    }\n\n    ul.innerHTML = \"\";\n    toggleLoader(true);\n    btn.disabled = true;\n\n    currentQuery = searchQuery;\n    page = 1;\n\n    fetchData(currentQuery, page).then(data => {\n\n       if (data.hits.length === 0) {\n           showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n           return;\n        }\n \n        const imagesMarkup = data.hits.map(renderMarkup).join(\"\");\n        ul.insertAdjacentHTML(\"beforeend\", imagesMarkup);\n        loadBtn.style.display = \"flex\";\n        lightbox.refresh();\n        form.reset();\n        page += 1;\n        \n        \n    })\n        .catch(error => {\n        showErrorMessage(error.message);\n        })\n        \n        .finally(() => {\n        toggleLoader(false)\n        btn.disabled = false;\n    });\n}\n\nform.addEventListener(\"submit\", checkForm);\nloadBtn.addEventListener(\"click\", clickOnBtn);"],"names":["BASE_URL","API_KEY","limit","fetchData","searchQuery","page","params","urlParams","axios","ul","loader","secondLoader","showErrorMessage","message","iziToast","toggleLoader","show","toggleLoaderSec","renderMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","clickOnBtn","totalPages","imagesMarkup","currentQuery","cardHeight","loadBtn","error","btn","form","checkForm","event","data"],"mappings":"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"}